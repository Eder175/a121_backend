{% extends 'core/base.html' %}
{% load i18n static %}

{% block title %}{% trans "Cursos A121 Revolution" %}{% endblock %}

{% block extra_head %}
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
<section class="products" id="cursos">
    <div class="container">
        <h2>{% trans "Cursos do Futuro - Powered by A121" %}</h2>
        <div class="product-grid">
            <div class="product-card" data-course="ia">
                <div class="product-image-wrapper">
                    <img src="{% static 'images/IA.png' %}" alt="{% trans 'Introdução à IA' %}" class="product-image">
                </div>
                <h3>{% trans "Introdução à IA" %}</h3>
                <p>{% trans "Aprenda os fundamentos da inteligência artificial." %}</p>
                <p>{% trans "Preço" %}: <span class="product-price" data-price="199.90">199.90 €</span></p>
                <p>{% trans "Duração" %}: 10 {% trans "horas" %}</p>
                <a href="{% url 'core:cadastro' %}" class="btn">{% trans "Inscrever-se" %}</a>
            </div>
            <div class="product-card" data-course="finance">
                <div class="product-image-wrapper">
                    <img src="{% static 'images/financaspessoais.webp' %}" alt="{% trans 'Finanças Pessoais' %}" class="product-image">
                </div>
                <h3>{% trans "Finanças Pessoais" %}</h3>
                <p>{% trans "Domine suas finanças e planeje seu futuro." %}</p>
                <p>{% trans "Preço" %}: <span class="product-price" data-price="149.90">149.90 €</span></p>
                <p>{% trans "Duração" %}: 8 {% trans "horas" %}</p>
                <a href="{% url 'core:cadastro' %}" class="btn">{% trans "Inscrever-se" %}</a>
            </div>
        </div>
        <section class="gamification">
            <h3>{% trans "Ganhe A121Coin!" %}</h3>
            <p id="gamification-tokens">{% trans "Você tem 0 A121Coin. Interaja para ganhar mais!" %}</p>
        </section>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
function updatePrices(currency, rate) {
    document.querySelectorAll('.product-price').forEach(priceElement => {
        const basePrice = parseFloat(priceElement.getAttribute('data-price'));
        priceElement.textContent = (basePrice * rate).toFixed(2) + ' ' + currency;
    });
}

fetch('{% url "core:get_exchange_rate" %}?base=EUR')
    .then(response => response.json())
    .then(data => {
        const currency = document.getElementById('currency-selector').value;
        updatePrices(currency, data.rates[currency] || 1);
    })
    .catch(error => console.error('Erro ao obter taxas de câmbio:', error));

let userA121Coin = 0;
function updateGamification() {
    document.getElementById('gamification-tokens').textContent = `{% trans "Você tem" %} ${userA121Coin} A121Coin. {% trans "Interaja para ganhar mais!" %}`;
}

document.querySelectorAll('.btn').forEach(button => {
    button.addEventListener('click', () => {
        userA121Coin += 1;
        updateGamification();
    });
});

document.addEventListener('DOMContentLoaded', updateGamification);
</script>
{% endblock %}