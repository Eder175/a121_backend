<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A121</title>
    {% load static %}
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=SF+Pro+Display">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Estilos para pop-up, calculadora, prévia e accordion */
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            width: 300px;
            text-align: center;
        }
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        .calculator {
            margin-top: 20px;
            padding: 15px;
            border: 2px solid #0071e3;
            border-radius: 8px;
            background-color: #fff;
            display: block;
        }
        .calculator input, .calculator select {
            padding: 5px;
            margin-right: 10px;
            border: 1px solid #d2d2d7;
            border-radius: 5px;
        }
        .calculator button {
            padding: 5px 10px;
            background-color: #0071e3;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .calculator button:hover {
            background-color: #005bb5;
        }
        .calculator .result-box {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #0071e3;
            border-radius: 5px;
            background-color: #f0f7ff;
            font-weight: bold;
            color: #0071e3;
            display: block;
        }
        .calculator .sales-list {
            margin-top: 10px;
            padding: 5px;
            border: 1px solid #d2d2d7;
            border-radius: 5px;
            background-color: #fff;
            max-height: 100px;
            overflow-y: auto;
        }
        .iphone-details, .other-details {
            padding: 100px 0;
            text-align: center;
            background-color: #fff;
            display: none;
        }
        .video-container {
            max-width: 600px;
            margin: 0 auto 20px;
        }
        .selected-product {
            max-width: 300px;
            margin: 0 auto;
        }
        .preview {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 1002;
            width: 400px;
            text-align: center;
        }
        .preview-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
        }
        .preview-options {
            margin: 10px 0;
        }
        .preview-options label {
            margin-right: 5px;
        }
        .preview-options select {
            padding: 5px;
            border-radius: 5px;
            border: 1px solid #d2d2d7;
        }
        .accordion {
            max-width: 800px;
            margin: 20px auto;
        }
        .accordion-item {
            margin-bottom: 10px;
        }
        .accordion-button {
            background-color: #0071e3;
            color: #fff;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            text-align: left;
        }
        .accordion-button:hover {
            background-color: #005bb5;
        }
        .accordion-content {
            display: none;
            padding: 10px;
            background-color: #f5f5f7;
            border-radius: 5px;
        }
        .accordion-content.active {
            display: block;
        }
        .product-card.highlighted {
            border: 3px solid #0071e3;
            transform: scale(1.05);
            transition: all 0.3s ease;
        }
        body {
            overflow: auto; /* Garante que o body permaneça acessível */
        }
    </style>
</head>
<body>
    <!-- Header com Navegação Ajustada e Logo -->
    <header>
        <nav class="container">
            <div class="logo">
                <img src="{% static 'images/A121 atualizada 3.png' %}" alt="A121 Logo" class="header-logo">
                A121
            </div>
            <ul class="nav-categories">
                <li class="dropdown">
                    <a href="#" onclick="showOtherDetails('mac')">Mac</a>
                    <div class="dropdown-content">
                        <a href="#" onclick="showAccordionContent('macbook-air')">MacBook Air</a>
                        <a href="#" onclick="showAccordionContent('macbook-pro')">MacBook Pro</a>
                        <a href="#" onclick="showAccordionContent('imac')">iMac</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#" onclick="showOtherDetails('ipad')">iPad</a>
                    <div class="dropdown-content">
                        <a href="#" onclick="showAccordionContent('ipad-pro')">iPad Pro</a>
                        <a href="#" onclick="showAccordionContent('ipad-air')">iPad Air</a>
                        <a href="#" onclick="showAccordionContent('ipad-mini')">iPad Mini</a>
                    </div>
                </li>
                <li class="dropdown" id="iphone-dropdown">
                    <a href="#" onclick="showIphoneDetails(event)">iPhone</a>
                    <div class="dropdown-content">
                        <a href="#" onclick="showProductPreview('iphone-15')">iPhone 15</a>
                        <a href="#" onclick="showProductPreview('iphone-16')">iPhone 16</a>
                        <a href="#" onclick="showProductPreview('iphone-16-pro')">iPhone 16 Pro</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#" onclick="showOtherDetails('watch')">Watch</a>
                    <div class="dropdown-content">
                        <a href="#" onclick="showAccordionContent('watch-series-9')">Apple Watch Series 9</a>
                        <a href="#" onclick="showAccordionContent('watch-ultra')">Apple Watch Ultra</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#" onclick="showOtherDetails('airpods')">AirPods</a>
                    <div class="dropdown-content">
                        <a href="#" onclick="showAccordionContent('airpods-pro')">AirPods Pro</a>
                        <a href="#" onclick="showAccordionContent('airpods-max')">AirPods Max</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#" onclick="showOtherDetails('incentives')">Campanhas de Incentivos</a>
                    <div class="dropdown-content">
                        <a href="#" onclick="showAccordionContent('rewards')">Programa de Recompensas</a>
                        <a href="#" onclick="showAccordionContent('bonuses')">Bônus por Vendas</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#" onclick="showOtherDetails('accessories')">Acessórios</a>
                    <div class="dropdown-content">
                        <a href="#" onclick="showAccordionContent('chargers')">Carregadores</a>
                        <a href="#" onclick="showAccordionContent('cases')">Capas</a>
                    </div>
                </li>
                <li><a href="#">Suporte</a></li>
            </ul>
            <ul class="nav-links">
                <li><a href="#cursos">Cursos</a></li>
                <li><a href="#negocio">Negócio</a></li>
                <li><a href="#niveis">Níveis</a></li>
                <li><a href="#">Cadastro</a></li>
                <li><a href="#">Login</a></li>
                <li>
                    <form class="search-bar">
                        <input type="text" placeholder="Pesquisar..." class="search-input">
                        <button type="submit" class="search-button"><i class="fas fa-search"></i></button>
                    </form>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section com iPhone 16e -->
    <section class="hero">
        <div class="hero-content-top">
            <h1>A121 - Seu Futuro Começa Aqui!</h1>
        </div>
        <div class="hero-image">
            <img src="{% static 'images/Iphone 16e.jpg' %}" alt="A121 Hero" class="hero-img">
        </div>
        <div class="hero-content-bottom">
            <p>Com o A121, você não compra um iPhone — você constrói um futuro. Junte-se à revolução.</p>
            <button class="cta-button">Comece Agora</button>
        </div>
    </section>

    <!-- Novo iPhone 16e (Demonstração) -->
    <section class="demo-section">
        <h2>Novo iPhone 16e</h2>
        <div class="demo-card">
            <img src="{% static 'images/Iphone 16e.jpg' %}" alt="iPhone 16e" class="demo-image">
        </div>
    </section>

    <!-- Products Section (Nossos Produtos) -->
    <section class="products" id="products">
        <h2>Nossos Produtos</h2>
        <div class="product-grid">
            <div class="product-card" id="iphone-15-card">
                <img src="{% static 'images/iPhone-15-rosa.jpg' %}" alt="iPhone 15 Rosa" class="product-image">
                <h3>iPhone 15</h3>
                <p>Impressionante como sempre.</p>
                <div class="options">
                    <div class="color-options">
                        <span class="color-option" data-color="rosa" style="background-color: #ffcccb;"></span>
                    </div>
                    <div class="storage-options">
                        <button class="storage-button" data-storage="128GB" data-price="889">128 GB</button>
                        <button class="storage-button" data-storage="256GB" data-price="1019">256 GB</button>
                        <button class="storage-button" data-storage="512GB" data-price="1269">512 GB</button>
                    </div>
                </div>
                <p class="selected-price" id="selected-price-15">Selecionado: 128 GB - 889 €</p>
                <button class="cta-button">Comprar</button>
            </div>
            <div class="product-card" id="iphone-16-card">
                <img src="{% static 'images/iPhone-16-azul.jpg' %}" alt="iPhone 16 Azul" class="product-image">
                <h3>iPhone 16</h3>
                <p>Potente em tudo.</p>
                <div class="options">
                    <div class="color-options">
                        <span class="color-option" data-color="azul" style="background-color: #add8e6;"></span>
                    </div>
                    <div class="storage-options">
                        <button class="storage-button" data-storage="128GB" data-price="989">128 GB</button>
                        <button class="storage-button" data-storage="256GB" data-price="1119">256 GB</button>
                        <button class="storage-button" data-storage="512GB" data-price="1369">512 GB</button>
                    </div>
                </div>
                <p class="selected-price" id="selected-price-16">Selecionado: 128 GB - 989 €</p>
                <button class="cta-button">Comprar</button>
            </div>
            <div class="product-card" id="iphone-16-pro-card">
                <img src="{% static 'images/iPhone-16-pro-dourado claro.jpg' %}" alt="iPhone 16 Pro Dourado Claro" class="product-image">
                <h3>iPhone 16 Pro</h3>
                <p>O iPhone de topo.</p>
                <div class="options">
                    <div class="color-options">
                        <span class="color-option" data-color="dourado claro" style="background-color: #d4af37;"></span>
                        <span class="color-option" data-color="preto" style="background-color: #000000;"></span>
                        <span class="color-option" data-color="branco" style="background-color: #ffffff;"></span>
                        <span class="color-option" data-color="roxo" style="background-color: #800080;"></span>
                    </div>
                    <div class="storage-options">
                        <button class="storage-button" data-storage="128GB" data-price="1249">128 GB</button>
                        <button class="storage-button" data-storage="256GB" data-price="1379">256 GB</button>
                        <button class="storage-button" data-storage="512GB" data-price="1629">512 GB</button>
                        <button class="storage-button" data-storage="1TB" data-price="1879">1TB</button>
                    </div>
                </div>
                <p class="selected-price" id="selected-price-16-pro">Selecionado: 128 GB - 1249 €</p>
                <button class="cta-button">Comprar</button>
            </div>
        </div>
        <button class="cta-button compare-button" onclick="compareModels()">Compare Todos os Modelos</button>
    </section>

    <!-- iPhone Details Section (Subseção Dinâmica) -->
    <section class="iphone-details" id="iphone-details" style="display: none;">
        <h2>Conheça os iPhones da A121</h2>
        <div class="video-container">
            <video controls>
                <source src="{% static 'videos/IPHONE 16 PRO MAX.mp4' %}" type="video/mp4">
                Seu navegador não suporta vídeo.
            </video>
        </div>
        <div id="selected-product" class="selected-product"></div>
        <button class="cta-button" onclick="showPopup()">Junte-se à Revolução</button>
        <button class="cta-button compare-button" onclick="compareModels()">Compare Todos os Modelos</button>
    </section>

    <!-- Other Details Section (para Mac, iPad, etc.) -->
    <section class="other-details" id="other-details" style="display: none;">
        <h2>Explore os Produtos da A121</h2>
        <div class="accordion" id="product-accordion"></div>
    </section>

    <!-- Benefits Section -->
    <section class="benefits" id="negocio">
        <h2>Por que escolher a A121?</h2>
        <div class="benefits-text">
            <p><strong>Reescreva seu destino:</strong> Você já imaginou reescrever o destino da humanidade? Aqui, qualquer pessoa pode criar um site de vendas de iPhones, mas só você pode mudar sua vida. Somos os arquitetos de um futuro extraordinário.</p>
            <p><strong>Entre na revolução:</strong> Mais do que comprar um iPhone, você se junta a uma revolução global para mudar o eixo do planeta com liberdade financeira e geográfica.</p>
            <p><strong>Aja agora:</strong> Não seja refém do medo — a hora de agir é agora e construir seus sonhos com a A121!</p>
            <p><strong>Desperte seu potencial:</strong> Ter o melhor iPhone do mundo é só o começo. Não o use apenas para vídeos ou redes sociais como TikTok — transforme-o em uma ferramenta para conhecimento e revolução pessoal!</p>
            <p><strong>Construa uma comunidade:</strong> Com a A121, você se junta a nós para criar uma família global, onde todos crescem juntos como um só, mudando vidas e o eixo do planeta!</p>
            <p><strong>Aja agora:</strong> Pare de perder tempo. Hoje é o dia de usar sua inteligência e construir seus sonhos com a A121!</p>
        </div>
        <div class="calculator">
            <h3>Calculadora de Ganhos</h3>
            <p>Adicione suas vendas:</p>
            <select id="model">
                <option value="iphone-15">iPhone 15</option>
                <option value="iphone-16">iPhone 16</option>
                <option value="iphone-16-pro">iPhone 16 Pro</option>
            </select>
            <select id="storage">
                <option value="128GB">128 GB</option>
                <option value="256GB">256 GB</option>
                <option value="512GB">512 GB</option>
                <option value="1TB">1 TB</option>
            </select>
            <input type="number" id="salesCount" min="0" placeholder="Quantidade">
            <select id="level">
                <option value="1">Nível 1 (5%)</option>
                <option value="2">Nível 2 (1.55%)</option>
                <option value="3">Nível 3 (1.15%)</option>
            </select>
            <button onclick="addSale()">Adicionar Venda</button>
            <button onclick="calculateTotal()">Calcular Total</button>
            <div class="sales-list" id="salesList"></div>
            <div class="result-box" id="earningsResult">Total Ganho: €0.00</div>
        </div>
        <button class="cta-button">Comece Agora</button>
    </section>

    <!-- Video 2 -->
    <section class="video-section">
        <h2>Experiência iPhone 16</h2>
        <div class="video-container">
            <video controls>
                <source src="{% static 'videos/Video 2.mp4' %}" type="video/mp4">
                Seu navegador não suporta vídeo.
            </video>
        </div>
    </section>

    <!-- Video 3 -->
    <section class="video-section">
        <h2>Inovação com iPhone 16</h2>
        <div class="video-container">
            <video controls>
                <source src="{% static 'videos/Video 3.mp4' %}" type="video/mp4">
                Seu navegador não suporta vídeo.
            </video>
        </div>
    </section>

    <!-- Footer com Vídeo 4 -->
    <footer>
        <div class="footer-video">
            <video controls>
                <source src="{% static 'videos/Video 4.mp4' %}" type="video/mp4">
                Seu navegador não suporta vídeo.
            </video>
        </div>
        <div class="footer-top">
            <p>As notícias e atualizações mais recentes, diretamente da A121.</p>
            <a href="#" class="footer-link">Saiba mais</a>
        </div>
        <div class="footer-main container">
            <div class="footer-section">
                <h3>Loja</h3>
                <ul>
                    <li><a href="#">Mac</a></li>
                    <li><a href="#">iPad</a></li>
                    <li><a href="#">iPhone</a></li>
                    <li><a href="#">Watch</a></li>
                    <li><a href="#">AirPods</a></li>
                    <li><a href="#">Acessórios</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Campanhas de Incentivos</h3>
                <ul>
                    <li><a href="#">Apple One</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Suporte</h3>
                <ul>
                    <li><a href="#">Ajuda</a></li>
                    <li><a href="#">Contactar</a></li>
                </ul>
            </div>
            <div class="footer-section social">
                <h3>Redes Sociais</h3>
                <ul>
                    <li><a href="#" target="_blank"><i class="fab fa-twitter"></i> Twitter</a></li>
                    <li><a href="#" target="_blank"><i class="fab fa-facebook"></i> Facebook</a></li>
                    <li><a href="#" target="_blank"><i class="fab fa-instagram"></i> Instagram</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2025 A121. Todos os direitos reservados.</p>
            <ul>
                <li><a href="#">Política de Privacidade</a></li>
                <li><a href="#">Termos de Uso</a></li>
                <li><a href="#">Mapa do Site</a></li>
            </ul>
        </footer>

    <!-- Pop-up -->
    <div class="popup-overlay" id="popupOverlay" onclick="hidePreview()"></div>
    <div class="popup" id="popup">
        <h3>Junte-se à Revolução</h3>
        <p>Venda iPhones e ganhe comissões! Convide amigos e cresça na rede!</p>
        <button class="cta-button" onclick="hidePreview()">Fechar</button>
    </div>

    <!-- Prévia flutuante -->
    <div class="preview-overlay" id="previewOverlay" onclick="hidePreview()"></div>
    <div class="preview" id="productPreview">
        <h3 id="preview-title"></h3>
        <div class="video-container">
            <video controls id="preview-video">
                <source src="{% static 'videos/IPHONE 16 PRO MAX.mp4' %}" type="video/mp4">
                Seu navegador não suporta vídeo.
            </video>
        </div>
        <img id="preview-image" src="" alt="Produto" style="max-width: 100%; margin-top: 10px;">
        <div class="preview-options">
            <label>Cor: </label>
            <select id="preview-color" onchange="updatePreviewImage()">
                <option value="rosa">Rosa</option>
                <option value="azul">Azul</option>
                <option value="dourado claro">Dourado Claro</option>
                <option value="preto">Preto</option>
                <option value="branco">Branco</option>
                <option value="roxo">Roxo</option>
            </select>
            <label>Armazenamento: </label>
            <select id="preview-storage">
                <option value="128GB">128 GB</option>
                <option value="256GB">256 GB</option>
                <option value="512GB">512 GB</option>
                <option value="1TB">1 TB</option>
            </select>
        </div>
        <button class="cta-button" onclick="selectProduct()">Selecionar</button>
        <button class="cta-button" onclick="hidePreview()">Fechar</button>
        <button class="cta-button" onclick="goToDetails()">Ver Detalhes</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let sales = [];

            // Atualiza o preço selecionado nos cards de produto
            document.querySelectorAll('.storage-options .storage-button').forEach(button => {
                button.addEventListener('click', function () {
                    const cardId = this.closest('.product-card').id;
                    const price = this.getAttribute('data-price');
                    const storage = this.getAttribute('data-storage');
                    document.getElementById(`selected-price-${cardId.split('-')[1]}`).textContent = `Selecionado: ${storage} - ${price} €`;
                });
            });

            // Função para mostrar prévia de iPhone
            function showProductPreview(productId) {
                event.preventDefault();
                console.log("Prévia de " + productId);
                const preview = document.getElementById('productPreview');
                const overlay = document.getElementById('previewOverlay');
                const previewTitle = document.getElementById('preview-title');
                const previewImage = document.getElementById('preview-image');
                const previewVideo = document.getElementById('preview-video');
                const previewColor = document.getElementById('preview-color');
                const previewStorage = document.getElementById('preview-storage');

                if (preview && overlay) {
                    const products = {
                        'iphone-15': { name: 'iPhone 15', image: '{% static "images/iPhone-15-rosa.jpg" %}', colors: ['rosa'], storage: ['128GB', '256GB', '512GB'], basePrice: 889 },
                        'iphone-16': { name: 'iPhone 16', image: '{% static "images/iPhone-16-azul.jpg" %}', colors: ['azul'], storage: ['128GB', '256GB', '512GB'], basePrice: 989 },
                        'iphone-16-pro': { name: 'iPhone 16 Pro', image: '{% static "images/iPhone-16-pro-dourado claro.jpg" %}', colors: ['dourado claro', 'preto', 'branco', 'roxo'], storage: ['128GB', '256GB', '512GB', '1TB'], basePrice: 1249 }
                    };
                    const product = products[productId];
                    if (product) {
                        previewTitle.textContent = product.name;
                        previewImage.src = product.image;
                        previewVideo.currentTime = 0;
                        previewVideo.play().catch(error => console.log("Erro ao tocar vídeo:", error));

                        previewColor.innerHTML = product.colors.map(color => `<option value="${color}">${color.charAt(0).toUpperCase() + color.slice(1)}</option>`).join('');
                        previewStorage.innerHTML = product.storage.map(size => `<option value="${size}">${size}</option>`).join('');

                        preview.style.display = 'block';
                        overlay.style.display = 'block';
                    }
                }
            }

            // Função para atualizar a imagem na prévia com base na cor
            function updatePreviewImage() {
                const previewTitle = document.getElementById('preview-title').textContent.toLowerCase().replace(' ', '-');
                const selectedColor = document.getElementById('preview-color').value;
                const previewImage = document.getElementById('preview-image');
                const images = {
                    'iphone-15': { 'rosa': '{% static "images/iPhone-15-rosa.jpg" %}' },
                    'iphone-16': { 'azul': '{% static "images/iPhone-16-azul.jpg" %}' },
                    'iphone-16-pro': { 
                        'dourado claro': '{% static "images/iPhone-16-pro-dourado claro.jpg" %}', 
                        'preto': '{% static "images/iPhone-16-pro-preto.jpg" %}', 
                        'branco': '{% static "images/iPhone-16-pro-branco.jpg" %}', 
                        'roxo': '{% static "images/iPhone-16-pro-roxo.jpg" %}' 
                    }
                };
                previewImage.src = images[previewTitle][selectedColor] || images[previewTitle]['dourado claro'];
            }

            // Função para selecionar o produto e rolar até ele
            function selectProduct() {
                const previewTitle = document.getElementById('preview-title').textContent.toLowerCase().replace(' ', '-');
                hidePreview();
                const productCard = document.getElementById(previewTitle + '-card');
                if (productCard) {
                    productCard.classList.add('highlighted');
                    productCard.scrollIntoView({ behavior: 'smooth' });
                    setTimeout(() => productCard.classList.remove('highlighted'), 2000);
                }
            }

            // Função para ir aos detalhes
            function goToDetails() {
                const previewTitle = document.getElementById('preview-title').textContent.toLowerCase().replace(' ', '-');
                hidePreview();
                const iphoneDetails = document.getElementById('iphone-details');
                if (iphoneDetails) {
                    iphoneDetails.style.display = 'block';
                    iphoneDetails.scrollIntoView({ behavior: 'smooth' });
                }
            }

            // Função para esconder a prévia
            function hidePreview() {
                const preview = document.getElementById('productPreview');
                const overlay = document.getElementById('previewOverlay');
                if (preview && overlay) {
                    preview.style.display = 'none';
                    overlay.style.display = 'none';
                    document.getElementById('preview-video').pause();
                    console.log("Prévia fechada com sucesso");
                }
            }

            // Função para mostrar seção de detalhes dos iPhones
            function showIphoneDetails(event) {
                event.preventDefault();
                console.log("Clicou em iPhone");
                const iphoneDetails = document.getElementById('iphone-details');
                if (iphoneDetails) {
                    iphoneDetails.style.display = 'block';
                    iphoneDetails.style.opacity = '0';
                    setTimeout(() => {
                        iphoneDetails.style.transition = 'opacity 0.5s ease-in';
                        iphoneDetails.style.opacity = '1';
                        iphoneDetails.scrollIntoView({ behavior: 'smooth' });
                    }, 10);
                }
            }

            // Função para mostrar seção de outros produtos
            function showOtherDetails(category) {
                event.preventDefault();
                console.log("Clicou em " + category);
                const otherDetails = document.getElementById('other-details');
                if (otherDetails) {
                    otherDetails.style.display = 'block';
                    otherDetails.style.opacity = '0';
                    setTimeout(() => {
                        otherDetails.style.transition = 'opacity 0.5s ease-in';
                        otherDetails.style.opacity = '1';
                        otherDetails.scrollIntoView({ behavior: 'smooth' });
                        populateAccordion(category);
                    }, 10);
                }
            }

            // Função para popular o accordion
            function populateAccordion(category) {
                const accordion = document.getElementById('product-accordion');
                if (accordion) {
                    const categories = {
                        'mac': {
                            items: [
                                { id: 'macbook-air', name: 'MacBook Air', image: '{% static "images/macbook-air.jpg" %}' },
                                { id: 'macbook-pro', name: 'MacBook Pro', image: '{% static "images/macbook-pro.jpg" %}' },
                                { id: 'imac', name: 'iMac', image: '{% static "images/imac.jpg" %}' }
                            ]
                        },
                        'ipad': {
                            items: [
                                { id: 'ipad-pro', name: 'iPad Pro', image: '{% static "images/ipad-pro.jpg" %}' },
                                { id: 'ipad-air', name: 'iPad Air', image: '{% static "images/ipad-air.jpg" %}' },
                                { id: 'ipad-mini', name: 'iPad Mini', image: '{% static "images/ipad-mini.jpg" %}' }
                            ]
                        },
                        'watch': {
                            items: [
                                { id: 'watch-series-9', name: 'Apple Watch Series 9', image: '{% static "images/watch-series-9.jpg" %}' },
                                { id: 'watch-ultra', name: 'Apple Watch Ultra', image: '{% static "images/watch-ultra.jpg" %}' }
                            ]
                        },
                        'airpods': {
                            items: [
                                { id: 'airpods-pro', name: 'AirPods Pro', image: '{% static "images/airpods-pro.jpg" %}' },
                                { id: 'airpods-max', name: 'AirPods Max', image: '{% static "images/airpods-max.jpg" %}' }
                            ]
                        },
                        'incentives': {
                            items: [
                                { id: 'rewards', name: 'Programa de Recompensas', image: '' },
                                { id: 'bonuses', name: 'Bônus por Vendas', image: '' }
                            ]
                        },
                        'accessories': {
                            items: [
                                { id: 'chargers', name: 'Carregadores', image: '' },
                                { id: 'cases', name: 'Capas', image: '' }
                            ]
                        }
                    };
                    const categoryData = categories[category];
                    if (categoryData) {
                        accordion.innerHTML = categoryData.items.map(item => `
                            <div class="accordion-item">
                                <button class="accordion-button" onclick="toggleAccordion('${item.id}')">${item.name}</button>
                                <div class="accordion-content" id="${item.id}">
                                    <img src="${item.image}" alt="${item.name}" style="max-width: 100%; height: auto;">
                                    <p>Detalhes de ${item.name} em breve!</p>
                                </div>
                            </div>
                        `).join('');
                    }
                }
            }

            // Função para alternar o accordion
            function toggleAccordion(id) {
                const content = document.getElementById(id);
                if (content) {
                    content.classList.toggle('active');
                }
            }

            // Função para mostrar o pop-up
            function showPopup() {
                const popup = document.getElementById('popup');
                const overlay = document.getElementById('popupOverlay');
                if (popup && overlay) {
                    popup.style.display = 'block';
                    overlay.style.display = 'block';
                }
            }

            // Função para esconder o pop-up
            function hidePreview() {
                const preview = document.getElementById('productPreview');
                const popup = document.getElementById('popup');
                const overlay = document.getElementById('previewOverlay');
                if (preview && overlay) {
                    preview.style.display = 'none';
                    overlay.style.display = 'none';
                    document.getElementById('preview-video').pause();
                    console.log("Prévia fechada com sucesso");
                }
                if (popup && overlay) {
                    popup.style.display = 'none';
                }
            }

            // Função para adicionar uma venda
            function addSale() {
                const model = document.getElementById('model').value;
                const storage = document.getElementById('storage').value;
                const salesCount = parseInt(document.getElementById('salesCount').value) || 0;
                const level = parseInt(document.getElementById('level').value);
                if (salesCount > 0) {
                    const prices = {
                        'iphone-15': { '128GB': 889, '256GB': 1019, '512GB': 1269 },
                        'iphone-16': { '128GB': 989, '256GB': 1119, '512GB': 1369 },
                        'iphone-16-pro': { '128GB': 1249, '256GB': 1379, '512GB': 1629, '1TB': 1879 }
                    };
                    const commissionRates = { 1: 0.05, 2: 0.0155, 3: 0.0115 };
                    const price = prices[model][storage];
                    const commission = salesCount * price * commissionRates[level];
                    sales.push({ model, storage, salesCount, level, commission, price });
                    updateSalesList();
                    clearInputs();
                    console.log("Venda adicionada:", { model, storage, salesCount, level, commission });
                } else {
                    alert("Insira uma quantidade válida!");
                }
            }

            // Função para atualizar a lista de vendas
            function updateSalesList() {
                const salesList = document.getElementById('salesList');
                salesList.innerHTML = sales.map(sale => 
                    `${sale.salesCount} ${sale.model.replace('iphone-', 'iPhone ')} de ${sale.storage} (Nível ${sale.level}): €${sale.commission.toFixed(2)}`
                ).join('<br>');
            }

            // Função para calcular o total
            function calculateTotal() {
                const total = sales.reduce((sum, sale) => sum + sale.commission, 0);
                const result = document.getElementById('earningsResult');
                if (result) {
                    result.textContent = `Total Ganho: €${total.toFixed(2)}`;
                    result.style.display = 'block';
                    console.log("Total calculado: €", total.toFixed(2));
                } else {
                    console.error('Erro: Elemento #earningsResult não encontrado!');
                }
            }

            // Função para limpar os inputs
            function clearInputs() {
                document.getElementById('salesCount').value = '';
            }

            // Função para comparar modelos (placeholder)
            function compareModels() {
                alert('Funcionalidade de comparação em desenvolvimento!');
            }

            // Vincular eventos
            const iphoneLink = document.querySelector('#iphone-dropdown a');
            if (iphoneLink) {
                iphoneLink.addEventListener('click', showIphoneDetails);
            }

            const dropdownLinks = document.querySelectorAll('#iphone-dropdown .dropdown-content a');
            if (dropdownLinks.length > 0) {
                dropdownLinks.forEach(link => {
                    link.addEventListener('click', function (event) {
                        event.preventDefault();
                        const productId = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                        console.log("Clicou em dropdown: " + productId);
                        showProductPreview(productId);
                    });
                });
            }

            document.querySelectorAll('.nav-categories .dropdown a').forEach(link => {
                if (link.getAttribute('onclick')) {
                    link.addEventListener('click', function (event) {
                        event.preventDefault();
                        const category = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                        showOtherDetails(category);
                    });
                }
            });

            document.querySelectorAll('.dropdown-content a').forEach(link => {
                link.addEventListener('click', function (event) {
                    event.preventDefault();
                    const itemId = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                    toggleAccordion(itemId);
                });
            });
        });
    </script>
</body>
</html>
